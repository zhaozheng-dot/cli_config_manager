

# Python CLI é¡¹ç›®å¼€å‘è¸©å‘ä¸ç¯å¢ƒé…ç½®å®å½• (PyCharm ç‰ˆ)

åœ¨æ„å»ºåŸºäº **Typer + Pydantic** çš„å‘½ä»¤è¡Œå·¥å…·æ—¶ï¼Œç”±äºé‡‡ç”¨äº†ç°ä»£åŒ–çš„ `src` ç›®å½•å¸ƒå±€ï¼Œæˆ‘ä»¬ç»å†äº†ä¸€ç³»åˆ—ä»è¿è¡ŒæŠ¥é”™åˆ° IDE è¯†åˆ«é—®é¢˜çš„è¿‡ç¨‹ã€‚

---

## å‘ä½ 1ï¼šç›¸å¯¹å¯¼å…¥ä¸è„šæœ¬ç›´æ¥è¿è¡Œå†²çª

* **ç°è±¡æè¿°**ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å°è¯•ç›´æ¥é€šè¿‡æ–‡ä»¶è·¯å¾„è¿è¡Œ `main.py`---python src/cli_config_manager/main.py --helpã€‚
* **å…¸å‹æŠ¥é”™**ï¼š
> `ImportError: attempted relative import with no known parent package`


* **åŸå› åˆ†æ**ï¼šä»£ç ä¸­ä½¿ç”¨äº† `from .processor import ...`ã€‚å½“ Python ç›´æ¥è¿è¡Œä¸€ä¸ª `.py` æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šå°†å…¶è§†ä¸ºç‹¬ç«‹è„šæœ¬è€ŒéåŒ…çš„ä¸€éƒ¨åˆ†ï¼Œå¯¼è‡´æ— æ³•è¯†åˆ« `.` æŒ‡ä»£çš„çˆ¶çº§åŒ…ã€‚
* **è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ¨èè¿è¡Œæ–¹å¼**ï¼šé€€å›åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œä½¿ç”¨æ¨¡å—åŒ–æ–¹å¼è¿è¡Œï¼š`python -m cli_config_manager.main`ã€‚
2. **ä»£ç ä¼˜åŒ–**ï¼šå°†ç›¸å¯¹å¯¼å…¥æ”¹ä¸ºåŸºäºå®‰è£…åŒ…åçš„**ç»å¯¹å¯¼å…¥**ï¼š`from cli_config_manager.processor import DataProcessor`ã€‚



---

## å‘ä½ 2ï¼šæœ¬åœ°åŒ…å®‰è£…å‘½ä»¤ç¼ºå¤±â€œç‚¹å·â€

* **ç°è±¡æè¿°**ï¼šå°è¯•æ‰§è¡Œå¯ç¼–è¾‘å®‰è£…å‘½ä»¤æ—¶é—æ¼è·¯å¾„å‚æ•°: python -m pip install -eã€‚
* **å…¸å‹æŠ¥é”™**ï¼š
> `Usage: ... pip install [options] <requirement specifier> ...`
> `ERROR: You must give at least one requirement to install (see "pip help install")`


* **åŸå› åˆ†æ**ï¼š`-e` (Editable) å‚æ•°åå¿…é¡»æŒ‡å®šä¸€ä¸ªæœ¬åœ°è·¯å¾„ã€‚
* **è§£å†³æ–¹æ¡ˆ**ï¼šæ‰§è¡Œ `python -m pip install -e .`ã€‚è¿™é‡Œçš„ `.` ä»£è¡¨å½“å‰ç›®å½•ï¼Œå‘Šè¯‰ pip åœ¨å½“å‰ä½ç½®å¯»æ‰¾ `pyproject.toml` æˆ– `setup.py`ã€‚

---

## å‘ä½ 3ï¼šTyper ä¸ Click çš„ç‰ˆæœ¬å…¼å®¹æ€§ï¼ˆæ·±å‘ï¼‰

* **ç°è±¡æè¿°**ï¼šç¨‹åºç¯å¢ƒå®‰è£…æ­£å¸¸ï¼Œä½†è¿è¡Œ `--help` æ—¶å´©æºƒ---python -m cli_config_manager.main --helpã€‚
* **å…¸å‹æŠ¥é”™**ï¼š
> `TypeError: TyperArgument.make_metavar() takes 1 positional argument but 2 were given`


* **åŸå› åˆ†æ**ï¼šTyper çš„åº•å±‚ä¾èµ–åº“ `Click` å‘å¸ƒäº†ç ´åæ€§æ›´æ–°ï¼Œä¿®æ”¹äº†å†…éƒ¨å‡½æ•°çš„å‚æ•°ç­¾åï¼Œè€ç‰ˆæœ¬çš„ Typer (å¦‚ 0.9.0) æœªèƒ½é€‚é…ã€‚
* **è§£å†³æ–¹æ¡ˆ**ï¼šæ‰‹åŠ¨å¼ºåˆ¶å‡çº§ Typer è‡³æœ€æ–°ç‰ˆä»¥æ”¯æŒæ–°ç‰ˆ Clickï¼š
```bash
python -m pip install --upgrade typer click

```



---

## å‘ä½ 4ï¼šé…ç½®æ–‡ä»¶ä¸å®é™…å®‰è£…ç¯å¢ƒå†²çª

* **ç°è±¡æè¿°**ï¼šæ‰‹åŠ¨å‡çº§åŒ…åï¼Œå†æ¬¡æ‰§è¡Œé¡¹ç›®å®‰è£…æ—¶ pip æŠ›å‡ºä¸ä¸€è‡´è­¦å‘Š----python -m pip install --upgrade typer clickã€‚
* **å…¸å‹æŠ¥é”™**ï¼š
> `ERROR: pip's dependency resolver... conflicts.`
> `cli-config-manager 0.1.0 requires typer==0.9.0, but you have typer 0.21.1 which is incompatible.`


* **åŸå› åˆ†æ**ï¼š`pyproject.toml` ä¸­çš„ `dependencies` ç¡¬ç¼–ç äº†æ—§ç‰ˆæœ¬å·ï¼Œä¸ç¯å¢ƒä¸­çš„æœ€æ–°ç‰ˆæœ¬å†²çªã€‚
* **è§£å†³æ–¹æ¡ˆ**ï¼šä¿®æ”¹ `pyproject.toml`ï¼Œå°†ä¾èµ–é™å®šæ”¹ä¸ºå®½æ¾æ¨¡å¼ï¼š`typer >= 0.12.0`ï¼Œå¹¶é‡æ–°è¿è¡Œå®‰è£…å‘½ä»¤ã€‚

---

## å‘ä½ 5ï¼šPyCharm å†…éƒ¨è·¯å¾„è¯†åˆ«â€œçˆ†çº¢â€

* **ç°è±¡æè¿°**ï¼šä»£ç åœ¨ç»ˆç«¯è¿è¡Œæ— è¯¯ï¼Œä½† PyCharm ç¼–è¾‘å™¨ç•Œé¢å‡ºç°å¤§é‡çº¢è‰²æ³¢æµªçº¿ã€‚
* **å…¸å‹æŠ¥é”™ (IDE æç¤º)**ï¼š
> `Unresolved reference 'cli_config_manager'`


* **åŸå› åˆ†æ**ï¼šPyCharm é»˜è®¤å°†é¡¹ç›®æ ¹ç›®å½•è§†ä¸ºæºç æ ¹ç›®å½•ï¼Œæ— æ³•è‡ªåŠ¨è¯†åˆ« `src` æ–‡ä»¶å¤¹ä¸‹çš„åŒ…ç»“æ„ã€‚
* **PyCharm ä¸“å±è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ ‡è®°è·¯å¾„**ï¼šåœ¨é¡¹ç›®ç›®å½•æ ‘ä¸­ï¼Œå³é”®ç‚¹å‡» `src` æ–‡ä»¶å¤¹ -> **Mark Directory as** -> **Sources Root**ã€‚
2. **åˆ·æ–°ç´¢å¼•**ï¼šè‹¥çº¢çº¿æœªç«‹å³æ¶ˆå¤±ï¼Œæ‰§è¡Œ `File` -> `Invalidate Caches...` -> `Restart`ã€‚



---

### ğŸ› ï¸ æ ¸å¿ƒå¼€å‘æµç¨‹æ€»ç»“

* **è¿è¡Œ**ï¼šå§‹ç»ˆä½¿ç”¨ `python -m cli_config_manager.main` ä»¥ç¡®ä¿åŒ…è·¯å¾„æ­£ç¡®ã€‚
* **ç¯å¢ƒ**ï¼šé€šè¿‡ `pip install -e .` å®ç°ä»£ç ä¿®æ”¹å³æ—¶ç”Ÿæ•ˆã€‚
* **é…ç½®**ï¼šä¾èµ–é¡¹å°½é‡ä½¿ç”¨èŒƒå›´é™å®šï¼ˆå¦‚ `>=`ï¼‰è€Œéå†™æ­»ç‰ˆæœ¬å·ï¼ˆå¦‚ `==`ï¼‰ã€‚

---
